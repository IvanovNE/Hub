# Паттерн проектирования Multiton (Пул одиночек / Registry of singletons) и пример его реализации на языке программирования C# (на платформе .NET4).

## 1. Описание

### Паттерн Multiton интересен тем, что по сути представляет собой частичную совокупность двух паттернов проектирования: Singletone (Одиночка) и Object pool (Пул обьектов).
#### Multitone позволяет создать определенное число своих экземпляров и предоставляет точку доступа для работы с ними. При этом каждый экземпляр связан с уникальным идентификатором.
#### Пул одиночек может использоваться в случае, когда необходимо предоставить доступ к определенным данным из различных блоков приложения. Другой случай – взаимодействие с аппаратным обеспечением через экземпляры одного и того же класса. Например, обмен данными с сетью контроллеров, опрос группы серверов или рабочих станций в сети. Все эти примеры объединяет одно: число экземпляров класса может (и даже должно) быть ограничено и они глобальные для всего приложения.
#### Если рассматривать данный паттерн как объединение идей Одиночки и Пула объектов, можно определить его свойства:
  #####   1) Multitone может использоваться как с жестко заданным списком экземпляров, так и с созданием по требованию.
  #####   2) Если список фиксированный, то возможно создание всех экземпляров при старте программы или обращению к любому из них.
  #####   3) Возможны два варианта реакции на запрос экземпляра с неизвестным идентификатором: отказ или создание нового.
  #####   4) Минусом шаблона является возможность появления большого числа зависимых от него частей приложения. Однако, как и в случае с        Одиночкой, это можно смягчить используя Внедрение зависимостей (Dependency injection).

| Singletone | Object pool | Multitone |
| :------: | :------: | :------: |
| Создает единственный экземпляр своего класса и обеспечивает доступ к нему. | Создаёт и содержит определенное число экземпляров заданного класса, не зная ничего о их сути. | Создает и содержит заданное число экземпляров своего класса. Обеспечивает их идентификацию и точку доступа к ним. |
| Гарантирует существование единственного экземпляра. | Не ограничивает создание других экземпляров заданного класса вне шаблона и ничего не знает о них. | Контролирует количество экземпляров. |

## 2. Реализация в общем виде

![.](https://github.com/Nikita-Ivanov347/Hub/blob/master/Multitone.png)

### Определяем параметры использования шаблона:
  #####   условие, ограничивающее общее число экземпляров;
  #####   реакцию на запрос с неизвестным идентификатором;
  #####   создаются ли экземпляры сразу или только по запросу;
  #####   объявляем только закрытый конструктор, чтобы запретить создание экземпляров извне;
  #####   создаем закрытый контейнер для размещения экземпляров;
  #####   предоставляем доступ к нему через метод;
  #####   клиентский код использует этот метод для получения нужного экземпляра класса.
